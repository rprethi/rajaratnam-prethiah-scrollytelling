document.addEventListener("DOMContentLoaded",r=>{gsap.registerPlugin(ScrollTrigger,MotionPathPlugin)});let chapScroll;const body=document.querySelector("body");window.addEventListener("scroll",function(){body.classList.add("is-scrolling"),window.clearTimeout(chapScroll),chapScroll=setTimeout(function(){body.classList.remove("is-scrolling")},100)});const play=document.querySelector(".action");gsap.from(".action",{repeat:-1,y:"-20",yoyo:!0}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre1"}}).fromTo("#constellation",{y:"100vh",opacity:0,duration:1},{y:0,opacity:1,duration:10}).fromTo("#lune",{y:"-200vh",duration:1},{y:0,duration:2}).fromTo("#lit-cadre",{y:"-200vh",duration:1},{y:0,duration:2}).fromTo("#lit-couverture",{y:"-200vh",duration:1},{y:0,duration:2}).fromTo("#polaris-dort-debut",{y:"-200vh",duration:1},{y:0,duration:2}).fromTo("#chapitre1 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}),gsap.timeline({scrollTrigger:{trigger:"#chapitre2",pin:!0,markers:!1,toggleActions:"play complete reverse reset"}}).fromTo(".lit-chapitre-deux",{opacity:0,duration:1},{opacity:1,duration:1}).fromTo(".polaris-lit-assis",{opacity:0,duration:1},{opacity:1,duration:1}).fromTo("#chapitre2 .etoile",{scale:0,duration:1},{scale:1,duration:2}).fromTo("#chapitre2 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre3"}}).fromTo(".lit-chapitre-trois",{opacity:0,duration:1},{opacity:1,duration:2}).fromTo(".debout-polaris",{opacity:0,duration:1},{opacity:1,duration:2}).fromTo("#chapitre3 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}),gsap.to(".etoile-avancement",{motionPath:{align:".trace",path:".trace"},duration:10,repeat:-1,yoyo:!0,ease:"power1"}),gsap.timeline({scrollTrigger:{trigger:"#chapitre3"}}).fromTo(".debout-polaris",{y:"0vh"},{y:"-5vh",ease:"power2.inOut",repeat:-1,yoyo:!0,duration:3}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre4"}}).fromTo("#nuage",{y:"-500vh",duration:1},{x:0,duration:1}).fromTo("#nuage01",{y:"-400vh",duration:1},{x:0,duration:1}).fromTo("#nuage02",{y:"-400vh",duration:1},{x:0,duration:1}).fromTo("#polaris-tomber",{y:"-210vh",rotation:0,duration:1},{y:0,rotation:360,duration:20}).fromTo("#chapitre4 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}),gsap.to("#chapitre4",{backgroundPosition:"50% 100%",ease:"none",scrollTrigger:{trigger:"#chapitre4",start:"top bottom",end:"bottom top",scrub:!0,markers:!1}}),gsap.to("#nuage",{y:25,ease:"none",scrollTrigger:{trigger:"#chapitre4",start:"top bottom",end:"bottom top",scrub:!0,markers:!1}}),gsap.to("#nuage01",{y:45,ease:"none",scrollTrigger:{trigger:"#chapitre4",start:"top bottom",end:"bottom top",scrub:!0,markers:!1}}),gsap.to("#nuage02",{y:65,ease:"none",scrollTrigger:{trigger:"#chapitre4",start:"top bottom",end:"bottom top",scrub:!0,markers:!1}}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre5"}}).fromTo("#chapitre5 .sprite2",{opacity:0,duration:3},{opacity:1,duration:3}).fromTo(".sprite1",{x:"50vw",duration:1},{x:"-10vw",duration:10}).fromTo("#chapitre5 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre6"}}).fromTo("#chapitre6 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}).fromTo(".polaris-peur",{opacity:0,duration:2},{opacity:1,duration:2}).fromTo("#chapitre6 .mot-encouragant p:nth-child(1)",{opacity:0,duration:4},{opacity:1,duration:4}).fromTo("#chapitre6 .mot-encouragant p:nth-child(2)",{opacity:0,duration:4},{opacity:1,duration:4}).fromTo("#chapitre6 .mot-encouragant p:nth-child(3)",{opacity:0,duration:4},{opacity:1,duration:4}).fromTo("#chapitre6 .sprite2",{scale:1,duration:1},{scale:0,duration:10}),gsap.timeline({scrollTrigger:{trigger:"#chapitre6"}}).fromTo("#etoile-peur",{y:"10vh"},{y:"15vh",ease:"power2.inOut",repeat:-1,yoyo:!0,duration:1}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre7"}}).fromTo("#chapitre7 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2}).fromTo(".polaris-joie",{opacity:0,duration:2},{opacity:1,duration:2}).fromTo("#chapitre7 .etoile-ours",{scale:.5,duration:1},{scale:0,duration:2}).fromTo("#chapitre7 .petit-ours-coeur",{opacity:0,duration:2},{opacity:1,duration:2}),gsap.timeline({scrollTrigger:{pin:!0,scrub:!0,markers:!1,trigger:"#chapitre8"}}).fromTo("#lit-cadre-fin",{y:"200vh",duration:1},{y:0,duration:2}).fromTo("#lit-couverture-fin",{y:"200vh",duration:1},{y:0,duration:2}).fromTo("#constellation-fin",{opacity:0,duration:1},{opacity:1,duration:10}).fromTo("#polaris-dort-fin",{y:"200vh",duration:1},{y:0,duration:2}).fromTo("#chapitre8 .text-chapitre",{opacity:0,duration:2},{opacity:1,duration:2});